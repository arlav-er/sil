<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:cc="http://java.sun.com/jsf/composite/components" template="../../template/main.xhtml">

	<ui:define name="title">
		<h:outputText value="#{msg['cittadino.servizi.titolo']}" escape="false" />
	</ui:define>

	<ui:define name="content">
		<ui:fragment rendered="#{listaServiziBean.showMessaggioUmbria()}">
			<p><h:outputText value="#{txt['cittadino.servizi.messaggio_umbria']}" escape="false" /></p>
		</ui:fragment>
		
		<h:form id="totally_useless_form">
			<cc:messages />
			<h:panelGrid columns="2" rendered="#{listaServiziBean.checkAbilitazioneVisibile('stato_occupazionale')}">
				<h:button outcome="/secure/utente/servizi/stato_occupazionale"
					onclick="#{listaServiziBean.utenteInfo.acceptedInformativaStatoOcc ? '' : 'return acceptInformativaStatoOcc();'}"
					styleClass="buttonStyle bigButton button-servizi-ammin" value="Stato occupazionale" />
				<h:panelGroup styleClass="ui-widget-content ui-corner-all cv-element textJustify" layout="block">
					<h:outputText value="#{txt['cittadino.servizi.stato_occupazionale.descrizione']}" escape="false" />
				</h:panelGroup>
			</h:panelGrid>

			<h:panelGrid columns="2" rendered="#{listaServiziBean.checkAbilitazioneVisibile('percorso_lavoratore')}">
				<h:button outcome="/secure/utente/servizi/percorso_lavoratore_pf"
					onclick="#{listaServiziBean.utenteInfo.acceptedInformativaPercLav ? '' : 'return acceptInformativaPercLav();'}"
					styleClass="buttonStyle bigButton button-servizi-ammin" value="Percorso lavoratore" />
				<h:panelGroup styleClass="ui-widget-content ui-corner-all cv-element textJustify" layout="block">
					<h:outputText value="#{txt['cittadino.servizi.percorso_lavoratore.descrizione']}" escape="false" />
				</h:panelGroup>
			</h:panelGrid>

			<h:panelGrid columns="2" rendered="#{listaServiziBean.checkAbilitazioneVisibile('did')}">
				<h:button outcome="/secure/utente/servizi/did_nuova/did_list"
					onclick="#{listaServiziBean.utenteInfo.acceptedInformativaDid ? '' : 'return acceptInformativaDid();'}"
					styleClass="buttonStyle bigButton button-servizi-ammin" value="DID Online" />
				<h:panelGroup styleClass="ui-widget-content ui-corner-all cv-element textJustify" layout="block">
					<h:outputText value="#{txt['cittadino.servizi.did.descrizione']}" escape="false" />
				</h:panelGroup>
			</h:panelGrid>

			<h:panelGrid columns="2" rendered="#{listaServiziBean.checkAbilitazioneVisibile('conferma_periodica')}">
				<h:button outcome="/secure/utente/servizi/conferma_periodica"
					onclick="#{listaServiziBean.utenteInfo.acceptedInformativaConfermaPeriodica ? '' : 'return acceptInformativaConfermaPeriodica();'}"
					styleClass="buttonStyle bigButton button-servizi-ammin" value="Conferma Periodica" />
				<h:panelGroup styleClass="ui-widget-content ui-corner-all cv-element textJustify" layout="block">
					<h:outputText value="#{txt['cittadino.servizi.conferma_periodica.descrizione']}" escape="false" />
				</h:panelGroup>
			</h:panelGrid>

			<h:panelGrid columns="2" rendered="#{listaServiziBean.checkAbilitazioneVisibile('rinnova_patto')}">
				<h:button outcome="/secure/utente/servizi/rinnovo_patto"
					onclick="#{listaServiziBean.utenteInfo.acceptedInformativaRinnovoPatto ? '' : 'return acceptInformativaRinnovoPatto();'}"
					styleClass="buttonStyle bigButton button-servizi-ammin" value="Rinnovo Patto" />
				<h:panelGroup styleClass="ui-widget-content ui-corner-all cv-element textJustify" layout="block">
					<h:outputText value="#{txt['cittadino.servizi.rinnovo_patto.descrizione']}" escape="false" />
				</h:panelGroup>
			</h:panelGrid>
			
			<h:panelGrid columns="2" rendered="#{listaServiziBean.checkAbilitazioneVisibile('patto_online')}">
				<h:button outcome="/secure/utente/servizi/patto_online"
					styleClass="buttonStyle bigButton button-servizi-ammin" value="Patto/accordo Online" />
				<h:panelGroup styleClass="ui-widget-content ui-corner-all cv-element textJustify" layout="block">
					<h:outputText value="#{txt['cittadino.servizi.patto_online.descrizione']}" escape="false" />
				</h:panelGroup>
			</h:panelGrid>
			
		</h:form>
		
		<h:button value="Torna indietro" outcome="home" styleClass="buttonStyle bigButton button-servizi-ammin"/>

		<cc:modalDialog submitLabel="Accetto" id="accept_stato_occ" title="Accetti l'informativa?"
			actionSubmit="#{listaServiziBean.acceptInformativaStatoOcc}">
			<h:outputText value="Accetti l'informativa riportata a lato?" />
		</cc:modalDialog>

		<cc:modalDialog submitLabel="Accetto" id="accept_perc_lav" title="Accetti l'informativa?"
			actionSubmit="#{listaServiziBean.acceptInformativaPercLav}">
			<h:outputText value="Accetti l'informativa riportata a lato?" />
		</cc:modalDialog>

		<cc:modalDialog submitLabel="Accetto" id="accept_did" title="Accetti l'informativa?"
			actionSubmit="#{listaServiziBean.acceptInformativaDid}">
			<h:outputText value="Accetti l'informativa riportata a lato?" />
		</cc:modalDialog>

		<cc:modalDialog submitLabel="Accetto" id="accept_conferma_periodica" title="Accetti l'informativa?"
			actionSubmit="#{listaServiziBean.acceptInformativaConfermaPeriodica}">
			<h:outputText value="Accetti l'informativa riportata a lato?" />
		</cc:modalDialog>

		<cc:modalDialog submitLabel="Accetto" id="accept_rinnovo_patto" title="Accetti l'informativa?"
			actionSubmit="#{listaServiziBean.acceptInformativaRinnovoPatto}">
			<h:outputText value="Accetti l'informativa riportata a lato?" />
		</cc:modalDialog>

		<script type="text/javascript">
			if (#{listaServiziBean.canLoadService});

			function acceptInformativaStatoOcc() {
				document.getElementById('accept_stato_occ').open(null,this);
				return false;
			}

			function acceptInformativaPercLav() {
				document.getElementById('accept_perc_lav').open(null,this);
				return false;
			}

			function acceptInformativaDid() {
				document.getElementById('accept_did').open(null,this);
				return false;
			}

			function acceptInformativaConfermaPeriodica() {
				document.getElementById('accept_conferma_periodica').open(null,this);
				return false;
			}

			function acceptInformativaRinnovoPatto() {
				document.getElementById('accept_rinnovo_patto').open(null,this);
				return false;
			}
		</script>
	</ui:define>
</ui:composition>