<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:cc="http://java.sun.com/jsf/composite/components"
	template="../../template/main.xhtml">

	<ui:define name="title">
		<h:outputText
			value="#{msg['cittadino.servizi.conferma_periodica.titolo']}"
			escape="false" />
	</ui:define>

	<ui:define name="content">

		<div id="answer" class="answer">
			<cc:waiting id="wait_conf_per" hidden="false"
				waitMessage="Stiamo comunicando con il Centro per l'impiego di tua competenza..." />

			<div class="ok_no_style" style="display: none">
				<h:graphicImage value="/resources/images/check.gif" alt="ok" />
			</div>

		</div>

		<h:link class="backButtonStyle" value="Torna indietro"
			title="Torna alla pagina dei servizi"
			outcome="/secure/utente/servizi/index.xhtml" />

		<script type="text/javascript">
			$(function() {
				//in realtà questo controllo è fake. serve solo per caricare il BackingBean della pagina
				//e verificare che l'utente sia abilitato ai servizi
				//la variabile canLoadService è sempre true se è stato possibile costruire il Bean
				if (#{confermaPeriodicaBean.canLoadService}) {
					setTimeout("fetchConfermaPeriodica(#{sessionBean.connectedUtente.id})",2000);
				}
			});
		</script>
	</ui:define>

</ui:composition>