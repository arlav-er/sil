<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:cc="http://java.sun.com/jsf/composite/components">

	<ui:fragment rendered="#{visCvBean.cvVisualizzaDTO.testataVisible}">
		<h3 class="dati_anagrafici_titolo headingCollapse ui-accordion-header ui-helper-reset ui-state-default ui-corner-all">
			<span class="dati_anagrafici_brake_titolo ui-icon ui-icon-triangle-1-e"></span>
			<a href="#">Dati Anagrafici</a>
		</h3>
		<div
			class="contentCollapse ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom">
			<h:panelGrid columns="2">
				<h:panelGroup>
					<h:outputText value="Nessun elemento inserito"
						rendered="#{empty visCvBean.cvVisualizzaDTO.cvDatiPersonaliDTO}" />
					<ui:repeat value="#{visCvBean.cvVisualizzaDTO.cvDatiPersonaliDTO}"
						var="dati_anagrafici" varStatus="status">
						<h:panelGrid id="dati_anagrafici_panel" columns="2"
							columnClasses="visualizza_left,visualizza_right" layout="block"
							style="width:100%">
							<h:outputLabel for="nome" value="Nome"
								rendered="#{not empty visCvBean.cvVisualizzaDTO.nome}" />
							<h:outputText id="nome" value="#{visCvBean.cvVisualizzaDTO.nome}"
								rendered="#{not empty visCvBean.cvVisualizzaDTO.nome}" />

							<h:outputLabel for="cognome" value="Cognome"
								rendered="#{not empty visCvBean.cvVisualizzaDTO.cognome}" />
							<h:outputText id="cognome"
								value="#{visCvBean.cvVisualizzaDTO.cognome}"
								rendered="#{not empty visCvBean.cvVisualizzaDTO.cognome}" />

							<h:outputLabel for="data_nascita" value="Data di nascita"
								rendered="#{not empty visCvBean.cvVisualizzaDTO.cvDatiPersonaliDTO.dtNascita}" />
							<h:outputText id="data_nascita"
								value="#{visCvBean.cvVisualizzaDTO.cvDatiPersonaliDTO.dtNascita}"
								rendered="#{not empty visCvBean.cvVisualizzaDTO.cvDatiPersonaliDTO.dtNascita}">
								<f:convertDateTime pattern="dd/MM/yyyy" type="date" />
							</h:outputText>

							<h:outputLabel for="comune_nascita"
								value="Comune o stato di nascita"
								rendered="#{not empty visCvBean.cvVisualizzaDTO.cvDatiPersonaliDTO.strComNascita}" />
							<h:outputText id="comune_nascita"
								value="#{visCvBean.cvVisualizzaDTO.cvDatiPersonaliDTO.strComNascita}"
								rendered="#{not empty visCvBean.cvVisualizzaDTO.cvDatiPersonaliDTO.strComNascita}" />

							<h:outputLabel for="indirizzo_domicilio"
								value="Indirizzo di domicilio"
								rendered="#{not empty visCvBean.cvVisualizzaDTO.cvDatiPersonaliDTO.indirizzoDomicilio}" />
							<h:outputText id="indirizzo_domicilio"
								value="#{visCvBean.cvVisualizzaDTO.cvDatiPersonaliDTO.indirizzoDomicilio}"
								rendered="#{not empty visCvBean.cvVisualizzaDTO.cvDatiPersonaliDTO.indirizzoDomicilio}" />

							<h:outputLabel for="comune_domicilio" value="Comune di domicilio"
								rendered="#{not empty visCvBean.cvVisualizzaDTO.cvDatiPersonaliDTO.strComDomicilio}" />
							<h:outputText id="comune_domicilio"
								value="#{visCvBean.cvVisualizzaDTO.cvDatiPersonaliDTO.strComDomicilio}"
								rendered="#{not empty visCvBean.cvVisualizzaDTO.cvDatiPersonaliDTO.strComDomicilio}" />

							<h:outputLabel for="tel1" value="Telefono"
								rendered="#{not empty visCvBean.cvVisualizzaDTO.cvDatiPersonaliDTO.tel1}" />
							<h:outputText id="tel1"
								value="#{visCvBean.cvVisualizzaDTO.cvDatiPersonaliDTO.tel1}"
								rendered="#{not empty visCvBean.cvVisualizzaDTO.cvDatiPersonaliDTO.tel1}" />

							<h:outputLabel for="tel2" value="Cellulare"
								rendered="#{not empty visCvBean.cvVisualizzaDTO.cvDatiPersonaliDTO.tel2}" />
							<h:outputText id="tel2"
								value="#{visCvBean.cvVisualizzaDTO.cvDatiPersonaliDTO.tel2}"
								rendered="#{not empty visCvBean.cvVisualizzaDTO.cvDatiPersonaliDTO.tel2}" />

							<h:outputLabel for="email" value="E-mail"
								rendered="#{not empty visCvBean.cvVisualizzaDTO.cvDatiPersonaliDTO.email}" />
							<h:outputText id="email"
								value="#{visCvBean.cvVisualizzaDTO.cvDatiPersonaliDTO.email}"
								rendered="#{not empty visCvBean.cvVisualizzaDTO.cvDatiPersonaliDTO.email}" />

							<h:outputLabel for="fax" value="Fax"
								rendered="#{not empty visCvBean.cvVisualizzaDTO.cvDatiPersonaliDTO.fax}" />
							<h:outputText id="fax"
								value="#{visCvBean.cvVisualizzaDTO.cvDatiPersonaliDTO.fax}"
								rendered="#{not empty visCvBean.cvVisualizzaDTO.cvDatiPersonaliDTO.fax}" />

							<h:outputLabel for="ricercabilita" value="Visibile alle aziende"
								rendered="#{(visCvBean.cvVisualizzaDTO.cvDatiPersonaliDTO.provenienzaCurriculum.id == 'MYPORTAL' and visCvBean.cvVisualizzaDTO.cvDatiPersonaliDTO.idPfPrincipal == sessionBean.connectedUtente.pfPrincipalDTO.id) or visCvBean.visualizzaRicercabilita}" />
							<h:outputText id="ricercabilita"
								value="#{visCvBean.cvVisualizzaDTO.cvDatiPersonaliDTO.ricercabile ? 'Si' : 'No'}"
								rendered="#{(visCvBean.cvVisualizzaDTO.cvDatiPersonaliDTO.provenienzaCurriculum.id == 'MYPORTAL' and visCvBean.cvVisualizzaDTO.cvDatiPersonaliDTO.idPfPrincipal == sessionBean.connectedUtente.pfPrincipalDTO.id) or visCvBean.visualizzaRicercabilita}" />

							<h:outputLabel for="cvClic" value="CV inviato a Cliclavoro"
								rendered="#{const['regione.cod']==22}" />
							<h:outputText id="cvClic"
								value="#{visCvBean.cvVisualizzaDTO.sincronizzatoCliclavoro ? 'Si' : 'No'}"
								rendered="#{const['regione.cod']==22}" />

							<h:outputLabel for="filename" value="Allegato"
								rendered="#{not empty visCvBean.cvVisualizzaDTO.cvDatiPersonaliDTO.filename}" />
							<h:outputLink id="filename"
								onclick="fetchStampa('#{request.contextPath}/secure/rest/services/getAllegatoCv?idCvAllegato='+#{visCvBean.cvVisualizzaDTO.cvDatiPersonaliDTO.idCvAllegato});return false;"
								title="#{visCvBean.cvVisualizzaDTO.cvDatiPersonaliDTO.filename}"
								rendered="#{not empty visCvBean.cvVisualizzaDTO.cvDatiPersonaliDTO.filename}">
								<h:outputText
									value="#{visCvBean.cvVisualizzaDTO.cvDatiPersonaliDTO.filename}" />
							</h:outputLink>
							<br />
						</h:panelGrid>
					</ui:repeat>
				</h:panelGroup>
				<h:panelGroup
					rendered="#{sessionBean.azienda and not empty visCvBean.idAcCandidatura}">
					<h:form>
						<h:panelGrid columns="2">
							<cc:selectOneMenu id="valutazione"
								label="Valuta curriculum vitae"
								value="#{visCvBean.codIdoneitaCandidatura}">
								<f:selectItems value="#{visCvBean.livelliValutazione}" />
							</cc:selectOneMenu>
						    <ui:fragment rendered="#{ !(utilsBean.isStaticRER() and (visCvBean.cvVisualizzaDTO.cvDatiPersonaliDTO.flgIdo == null or visCvBean.cvVisualizzaDTO.cvDatiPersonaliDTO.flgIdo == false)) }">			
							<h:commandLink styleClass="buttonStyle"
								action="#{visCvBean.assegnaValutazione}"
								value="Assegna valutazione">
								<f:ajax execute="@form" render=":valutazione_messages" />
							</h:commandLink>
							</ui:fragment>
						</h:panelGrid>
					</h:form>

					<cc:messages id="valutazione_messages" />
				</h:panelGroup>
			</h:panelGrid>
		</div>
	</ui:fragment>

</ui:composition>
