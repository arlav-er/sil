
/**
 * Please modify this class to meet your needs
 * This class is not complete
 */

package it.eng.myportal.ws.pattoonline;

import java.util.logging.Logger;

import javax.naming.Context;
import javax.naming.InitialContext;
import javax.naming.NamingException;

import it.eng.myportal.exception.MyPortalException;
import it.eng.myportal.ws.pattoonline.srv.PattoOnlineEJB;

/**
 * This class was generated by Apache CXF 3.1.7 2020-05-12T17:37:35.973+02:00 Generated source version: 3.1.7
 * 
 */

@javax.jws.WebService(serviceName = "PattoOnline", portName = "GestionePattoPort", targetNamespace = "http://pattoonline.ws.myportal.eng.it/", endpointInterface = "it.eng.myportal.ws.pattoonline.GestionePattoOnline")
@org.apache.cxf.interceptor.InInterceptors(interceptors = {
		"it.eng.myportal.ws.pattoonline.Wss4jImportPattoInterceptor" })

public class GestionePattoPortImpl implements GestionePattoOnline {

	private static final Logger LOG = Logger.getLogger(GestionePattoPortImpl.class.getName());

	/*
	 * (non-Javadoc)
	 * 
	 * @see it.eng.myportal.ws.pattoonline.GestionePattoOnline#invioPatto(it.eng.myportal.ws.pattoonline.PattoType
	 * patto, byte[] pdfPatto, java.lang.String esito, java.lang.String descrizione)*
	 */
	public void invioPatto(it.eng.myportal.ws.pattoonline.PattoType patto, byte[] pdfPatto,
			javax.xml.ws.Holder<java.lang.String> esito, javax.xml.ws.Holder<java.lang.String> descrizione) {
		LOG.info("Executing operation invioPatto");
		System.out.println(patto);
		System.out.println(pdfPatto);
		try {
			boolean newPatto = lookup().riceviPatto(patto, pdfPatto);
			esito.value = "OK";
			descrizione.value = newPatto ? "Patto ricevuto" : "Patto aggiornato";
		} catch (java.lang.Exception ex) {
			esito.value = "KO";
			descrizione.value = ex.getMessage();
			// throw new RuntimeException(ex);
		}
	}

	private PattoOnlineEJB lookup() throws MyPortalException {
		PattoOnlineEJB appuntamentoEJB = null;

		try {
			Context ic = new InitialContext();
			appuntamentoEJB = (PattoOnlineEJB) ic.lookup("java:app/MyPortal/" + PattoOnlineEJB.class.getSimpleName());
		} catch (NamingException e) {
			LOG.severe("GRAVE: Errore nella lookup dell'EJB PattoOnlineEJB");
			throw new MyPortalException(EsitoConst.COD_ESITO_NEGATIVO_SERVIZIO_NON_DISPONIBILE,
					EsitoConst.DES_ESITO_NEGATIVO_SERVIZIO_NON_DISPONIBILE);
		}
		return appuntamentoEJB;
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see it.eng.myportal.ws.pattoonline.GestionePattoOnline#richiestaPatto(it.eng.myportal.ws.pattoonline.PattoType
	 * patto)*
	 */
	public it.eng.myportal.ws.pattoonline.PattoPortaleType richiestaPatto(
			it.eng.myportal.ws.pattoonline.PattoType patto) {
		LOG.info("Executing operation richiestaPatto");
		try {
			it.eng.myportal.ws.pattoonline.PattoPortaleType _return = lookup().richiestaPatto(patto);
			return _return;
		} catch (java.lang.Exception ex) {
			LOG.severe("ERRORE operation richiestaPatto: " + ex.getMessage());
			//ex.printStackTrace();
			throw new RuntimeException(ex);
		}
	}

}
